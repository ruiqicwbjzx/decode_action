function sleep(_0x114c08){return new Promise(_0x4134d8=>setTimeout(_0x4134d8,_0x114c08));}async function robustSleep(_0x1d7e6b){const _0x178193=Date['now'](),_0x53e83c=_0x178193+_0x1d7e6b;while(Date['now']()<_0x53e83c){await new Promise(_0x35fbd4=>setTimeout(_0x35fbd4,Math['min'](0x64,_0x53e83c-Date['now']())));}}function calculateLuhnCheckDigit(_0x1a4bbd){let _0x50a170=0x0,_0x2e6d8f=!![];for(let _0x5eee9e=_0x1a4bbd['length']-0x1;_0x5eee9e>=0x0;_0x5eee9e--){let _0x4025f4=parseInt(_0x1a4bbd[_0x5eee9e]);_0x2e6d8f&&(_0x4025f4*=0x2,_0x4025f4>0x9&&(_0x4025f4-=0x9)),_0x50a170+=_0x4025f4,_0x2e6d8f=!_0x2e6d8f;}const _0x246ae8=(0xa-_0x50a170%0xa)%0xa;return _0x246ae8['toString']();}function isValidLuhn(_0x3a46c4){let _0x28ab78=0x0,_0x2a8091=![];for(let _0x305f9d=_0x3a46c4['length']-0x1;_0x305f9d>=0x0;_0x305f9d--){let _0x38bde3=parseInt(_0x3a46c4[_0x305f9d]);_0x2a8091&&(_0x38bde3*=0x2,_0x38bde3>0x9&&(_0x38bde3-=0x9)),_0x28ab78+=_0x38bde3,_0x2a8091=!_0x2a8091;}return _0x28ab78%0xa===0x0;}function calculateCheckDigit(_0xca8de8){return calculateLuhnCheckDigit(_0xca8de8);}function isValidCardNumber(_0x3e5e65){return isValidLuhn(_0x3e5e65);}const MII_DEFINITIONS={'0':'ISO/TC\x2068\x20and\x20other\x20industry\x20assignments','1':'Airlines','2':'Airlines\x20and\x20other\x20future\x20industry\x20assignments','3':'Travel\x20and\x20Entertainment\x20(American\x20Express,\x20Diners\x20Club,\x20JCB,\x20etc.)','4':'Banking\x20and\x20Financial\x20(Visa)','5':'Banking\x20and\x20Financial\x20(MasterCard)','6':'Merchandising\x20and\x20Banking/Financial\x20(Discover,\x20UnionPay)','7':'Petroleum\x20and\x20other\x20future\x20industry\x20assignments','8':'Healthcare,\x20Telecommunications\x20and\x20other\x20future\x20industry\x20assignments','9':'National\x20assignment'},VALID_BIN_RANGES={'Visa':[{'start':'4','length':0x1}],'MasterCard':[{'start':'51','end':'55'},{'start':'2221','end':'2720'}],'American\x20Express':[{'start':'34','length':0x2},{'start':'37','length':0x2}],'Diners\x20Club':[{'start':'36','length':0x2},{'start':'38','length':0x2},{'start':'300','end':'305'},{'start':'309','length':0x3}],'Discover':[{'start':'6011','length':0x4},{'start':'622126','end':'622925'},{'start':'644','end':'649'},{'start':'65','length':0x2}],'JCB':[{'start':'3528','end':'3589'}],'UnionPay':[{'start':'62','length':0x2}]};function validateBinFormat(_0x488b15){const _0x4d7fe9=_0x488b15['toString']()['trim']();if(!_0x4d7fe9||_0x4d7fe9['length']<0x4)return{'valid':![],'error':'BIN长度至少需要4位数字','code':'BIN_TOO_SHORT'};if(_0x4d7fe9['length']>0xa)return{'valid':![],'error':'BIN长度不应超过10位数字','code':'BIN_TOO_LONG'};if(!/^\d+$/['test'](_0x4d7fe9))return{'valid':![],'error':'BIN只能包含数字','code':'BIN_INVALID_CHARS'};const _0x3a92e2=_0x4d7fe9[0x0];if(!MII_DEFINITIONS[_0x3a92e2])return{'valid':![],'error':'无效的主要行业标识符（MII）:\x20'+_0x3a92e2,'code':'INVALID_MII'};if(!['3','4','5','6']['includes'](_0x3a92e2))return{'valid':![],'error':'MII\x20'+_0x3a92e2+'\x20不属于银行金融类别，应该是3、4、5或6开头','code':'NON_BANKING_MII','miiType':MII_DEFINITIONS[_0x3a92e2]};return{'valid':!![],'mii':_0x3a92e2,'miiType':MII_DEFINITIONS[_0x3a92e2],'binLength':_0x4d7fe9['length']};}function validateBinRange(_0x359a55){const _0x5dc62c=_0x359a55['toString']();let _0x4415a2=[];for(const [_0x454fee,_0x24d9bf]of Object['entries'](VALID_BIN_RANGES)){for(const _0x46cf28 of _0x24d9bf){if(_0x46cf28['length']){if(_0x5dc62c['startsWith'](_0x46cf28['start'])){_0x4415a2['push'](_0x454fee);break;}}else{if(_0x46cf28['end']){const _0x3f3ad6=_0x5dc62c['substring'](0x0,_0x46cf28['start']['length']),_0x32ddfb=parseInt(_0x46cf28['start']),_0x1e2859=parseInt(_0x46cf28['end']),_0x446024=parseInt(_0x3f3ad6);if(_0x446024>=_0x32ddfb&&_0x446024<=_0x1e2859){_0x4415a2['push'](_0x454fee);break;}}}}}if(_0x4415a2['length']>0x0)return{'valid':!![],'matchedBrands':_0x4415a2,'primaryBrand':_0x4415a2[0x0]};return{'valid':![],'error':'BIN不匹配任何已知的银行卡品牌范围','code':'UNKNOWN_BIN_RANGE'};}function validateBin(_0x33a1b9){const _0x324843=_0x33a1b9['toString']()['trim']();console['log']('\x0a🔍\x20开始校验BIN:\x20'+_0x324843);const _0x1d74c6=validateBinFormat(_0x324843);if(!_0x1d74c6['valid'])return console['error']('❌\x20BIN格式校验失败:\x20'+_0x1d74c6['error']),_0x1d74c6;console['log']('✅\x20BIN格式校验通过'),console['log']('\x20\x20\x20-\x20MII:\x20'+_0x1d74c6['mii']+'\x20('+_0x1d74c6['miiType']+')'),console['log']('\x20\x20\x20-\x20BIN长度:\x20'+_0x1d74c6['binLength']+'位');const _0x288982=validateBinRange(_0x324843);if(!_0x288982['valid'])return console['warn']('⚠️\x20BIN范围校验失败:\x20'+_0x288982['error']),console['warn']('\x20\x20\x20该BIN可能不是常见银行卡品牌，但仍可尝试生成'),{'valid':!![],'warning':_0x288982['error'],'mii':_0x1d74c6['mii'],'miiType':_0x1d74c6['miiType'],'isUnknownBrand':!![]};return console['log']('✅\x20BIN范围校验通过'),console['log']('\x20\x20\x20-\x20匹配品牌:\x20'+_0x288982['matchedBrands']['join'](',\x20')),console['log']('\x20\x20\x20-\x20主要品牌:\x20'+_0x288982['primaryBrand']),{'valid':!![],'mii':_0x1d74c6['mii'],'miiType':_0x1d74c6['miiType'],'binLength':_0x1d74c6['binLength'],'matchedBrands':_0x288982['matchedBrands'],'primaryBrand':_0x288982['primaryBrand']};}function detectCardBrand(_0x3967e9){const _0x20f48e=_0x3967e9['toString']();if(_0x20f48e['startsWith']('4'))return{'name':'Visa','length':0x10,'cvvLength':0x3};if(/^5[1-5]/['test'](_0x20f48e))return{'name':'MasterCard','length':0x10,'cvvLength':0x3};if(_0x20f48e['startsWith']('2')){if(_0x20f48e['length']>=0x4){const _0x55f005=parseInt(_0x20f48e['slice'](0x0,0x4),0xa);if(_0x55f005>=0x8ad&&_0x55f005<=0xaa0)return{'name':'MasterCard','length':0x10,'cvvLength':0x3};}}if(_0x20f48e['startsWith']('34')||_0x20f48e['startsWith']('37'))return{'name':'American\x20Express','length':0xf,'cvvLength':0x4};if(_0x20f48e['startsWith']('62'))return{'name':'UnionPay','length':0x10,'cvvLength':0x3};if(_0x20f48e['startsWith']('6011')||/^64[4-9]/['test'](_0x20f48e)||_0x20f48e['startsWith']('65'))return{'name':'Discover','length':0x10,'cvvLength':0x3};if(_0x20f48e['startsWith']('36')||_0x20f48e['startsWith']('38'))return{'name':'Diners\x20Club','length':0xe,'cvvLength':0x3};if(/^35[2-8]/['test'](_0x20f48e))return{'name':'JCB','length':0x10,'cvvLength':0x3};return{'name':'Unknown','length':0x10,'cvvLength':0x3};}function getRealisticRandomDigit(){const _0x260792=[0.09,0.1,0.11,0.1,0.1,0.11,0.1,0.09,0.1,0.1],_0x33cdfc=Math['random']();let _0x2c116e=0x0;for(let _0x10ae4a=0x0;_0x10ae4a<_0x260792['length'];_0x10ae4a++){_0x2c116e+=_0x260792[_0x10ae4a];if(_0x33cdfc<_0x2c116e)return _0x10ae4a;}return 0x5;}function generateBankStandardAccountSegment(_0x1e4cea,_0x40ad49,_0x5ef37d){const _0x992d4e={0x0:[0.05,0.15,0.15,0.1,0.1,0.1,0.1,0.1,0.1,0.05],0x1:[0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1,0.1],'default':[0.08,0.11,0.11,0.11,0.11,0.11,0.11,0.11,0.11,0.04]},_0x4af365=_0x992d4e[_0x1e4cea]||_0x992d4e['default'],_0x10a198=Math['random']();let _0x4e99aa=0x0;for(let _0xbf64cf=0x0;_0xbf64cf<_0x4af365['length'];_0xbf64cf++){_0x4e99aa+=_0x4af365[_0xbf64cf];if(_0x10a198<_0x4e99aa)return _0xbf64cf['toString']();}return'5';}function generateAdvancedAccountSegment(_0xca2b6,_0x5dc495){let _0x2c45de=0x0;const _0x3a80dc=0x64;while(_0x2c45de<_0x3a80dc){let _0x2d5b46='';const _0x5bd24d=parseInt(_0x5dc495['slice'](-0x4))%0x3e8,_0x38954a=String(Math['floor'](_0x5bd24d/0xa)%0x64)['padStart'](0x2,'0'),_0x47d297=[0.7,0.2,0.1],_0x222b95=weightedRandom(_0x47d297);if(_0xca2b6>=0x2){const _0x3c86c6=Math['floor'](Math['random']()*0xa);_0x2d5b46+=String((parseInt(_0x38954a[0x0])+_0x3c86c6)%0xa),_0x2d5b46+=String((parseInt(_0x38954a[0x1])+Math['floor'](Math['random']()*0x3))%0xa);}const _0x2c8981=_0xca2b6-_0x2d5b46['length'];for(let _0xb73495=0x0;_0xb73495<_0x2c8981;_0xb73495++){const _0xd69aba=_0x2d5b46['length'];if(_0x222b95===0x0)_0x2d5b46+=generateBankStandardAccountSegment(_0xd69aba,_0x2d5b46,_0xca2b6);else _0x222b95===0x1?_0xd69aba===0x2?_0x2d5b46+=weightedRandom([0.1,0.1,0.3,0.3,0.1,0.05,0.05,0x0,0x0,0x0]):_0x2d5b46+=generateBankStandardAccountSegment(_0xd69aba,_0x2d5b46,_0xca2b6):_0xd69aba<0x4?_0x2d5b46+=String(Math['floor'](Math['random']()*0xa)):_0x2d5b46+=generateBankStandardAccountSegment(_0xd69aba,_0x2d5b46,_0xca2b6);}return _0x2d5b46;_0x2c45de++;}let _0x5b4144='';for(let _0x28794f=0x0;_0x28794f<_0xca2b6;_0x28794f++){_0x5b4144+=generateBankStandardAccountSegment(_0x28794f,_0x5b4144,_0xca2b6);}return _0x5b4144;}function weightedRandom(_0x123fd3){const _0x4426d4=Math['random']();let _0x5bae9b=0x0;for(let _0xc80436=0x0;_0xc80436<_0x123fd3['length'];_0xc80436++){_0x5bae9b+=_0x123fd3[_0xc80436];if(_0x4426d4<_0x5bae9b)return _0xc80436;}return _0x123fd3['length']-0x1;}function generateRealisticExpiryDate(){const _0x2f8d31=new Date(),_0x1757b2=_0x2f8d31['getFullYear'](),_0x4b3160=_0x2f8d31['getMonth']()+0x1,_0x47e155=Math['floor'](Math['random']()*0x3)+0x3;let _0x5c96fa=_0x1757b2+_0x47e155,_0x341243;if(Math['random']()<0.7){const _0x1f5dfe=[0x3,0x6,0x9,0xc];_0x341243=_0x1f5dfe[Math['floor'](Math['random']()*_0x1f5dfe['length'])];}else _0x341243=Math['floor'](Math['random']()*0xc)+0x1;return _0x5c96fa===_0x1757b2&&_0x341243<=_0x4b3160&&_0x5c96fa++,{'expMonth':String(_0x341243)['padStart'](0x2,'0'),'expYear':String(_0x5c96fa)['slice'](-0x2)};}function generateCVV(_0x5f48a1,_0x244ab2,_0x5b6859=0x3){if(_0x244ab2||_0x5b6859===0x4)return String(Math['floor'](Math['random']()*0x2328)+0x3e8);else{let _0x11e5a4;do{_0x11e5a4=Math['floor'](Math['random']()*0x384)+0x64;const _0x4791c9=String(_0x11e5a4);if(_0x4791c9[0x0]!==_0x4791c9[0x1]||_0x4791c9[0x1]!==_0x4791c9[0x2])break;}while(!![]);return String(_0x11e5a4);}}function formatCardNumber(_0x4d8247,_0x4b7384){return _0x4b7384?_0x4d8247['replace'](/(\d{4})(\d{6})(\d{5})/,'$1\x20$2\x20$3'):_0x4d8247['replace'](/(\d{4})(?=\d)/g,'$1\x20');}function generateCardInfo(_0x567c59){if(!_0x567c59||_0x567c59['length']===0x0)throw new Error('必须提供BIN前缀');const _0x467e04=_0x567c59['toString']()['replace'](/\D/g,''),_0x15493b=validateBin(_0x467e04);if(!_0x15493b['valid'])throw new Error('BIN校验失败:\x20'+_0x15493b['error']+'\x20(错误码:\x20'+_0x15493b['code']+')');_0x15493b['warning']&&console['warn']('⚠️\x20BIN校验警告:\x20'+_0x15493b['warning']);const _0x3ac232=detectCardBrand(_0x467e04),_0xb4c7f1=_0x3ac232['length'],_0x3e8429=_0x3ac232['name']==='American\x20Express',_0x1163e2=_0xb4c7f1-_0x467e04['length'];if(_0x1163e2<=0x1)throw new Error('BIN长度过长，无法生成'+_0xb4c7f1+'位卡号');let _0x593a17=0x0;const _0x4b2a13=0x32;let _0xcf0332=null;while(_0x593a17<_0x4b2a13){try{const _0x473c73=_0x1163e2-0x1;let _0x4228dc=_0x467e04;if(_0x473c73>0x0){const _0xf27032=generateAdvancedAccountSegment(_0x473c73,_0x467e04);_0x4228dc+=_0xf27032;}const _0x5cce79=calculateCheckDigit(_0x4228dc),_0x3337c2=_0x4228dc+_0x5cce79;if(_0x3337c2['length']!==_0xb4c7f1){console['error']('❌\x20卡号长度错误:\x20期望'+_0xb4c7f1+'位，实际'+_0x3337c2['length']+'位',_0x3337c2),console['error']('BIN长度:\x20'+_0x467e04['length']+',\x20账户段长度:\x20'+_0x473c73+',\x20校验位:\x201位');throw new Error('生成的卡号长度不正确:\x20期望'+_0xb4c7f1+'位，实际'+_0x3337c2['length']+'位');}if(!isValidCardNumber(_0x3337c2)){console['warn']('生成的卡号未通过Luhn校验:',_0x3337c2),_0x593a17++;continue;}const {expMonth:_0x23c656,expYear:_0x2a736e}=generateRealisticExpiryDate(),_0x748b06=generateCVV(_0x467e04,_0x3e8429,_0x3ac232['cvvLength']);_0xcf0332={'cardNumber':formatCardNumber(_0x3337c2,_0x3e8429),'expiryDate':_0x23c656+'/'+_0x2a736e,'cvc':_0x748b06,'cardBrand':_0x3ac232['name']};break;}catch(_0x38159a){console['error']('生成卡号尝试\x20'+(_0x593a17+0x1)+'\x20失败:',_0x38159a['message']);}_0x593a17++;}if(_0xcf0332)return _0xcf0332;throw new Error('无法生成符合要求的高质量卡号，请尝试更换BIN或稍后重试');}async function getCheckoutUrl(_0x3bff85='pro'){console['log']('💳\x20获取绑卡页面URL...');const _0x4b7617={'Accept':'*/*','Accept-Encoding':'gzip,\x20deflate,\x20br,\x20zstd','Accept-Language':'zh-CN,zh;q=0.9','Content-Type':'application/json','Origin':'https://cursor.com','Priority':'u=1,\x20i','Referer':'https://cursor.com/dashboard','Sec-Ch-Ua-Arch':'\x22x86\x22','Sec-Ch-Ua-Bitness':'\x2264\x22','Sec-Ch-Ua-Mobile':'?0','Sec-Ch-Ua-Platform':'\x22Windows\x22','Sec-Fetch-Dest':'empty','Sec-Fetch-Mode':'cors','Sec-Fetch-Site':'same-origin','User-Agent':navigator['userAgent']},_0x33fe93={'allowAutomaticPayment':!![],'allowTrial':!![],'tier':_0x3bff85};try{console['log']('📡\x20发送POST请求到:\x20https://cursor.com/api/checkout'),console['log']('📦\x20请求数据:',_0x33fe93);const _0x1a28c8=await fetch('https://cursor.com/api/checkout',{'method':'POST','headers':_0x4b7617,'body':JSON['stringify'](_0x33fe93),'credentials':'include'});console['log']('🔍\x20绑卡响应状态:\x20'+_0x1a28c8['status']);if(_0x1a28c8['status']===0xc8)try{const _0x4e113b=await _0x1a28c8['json']();return console['log']('✅\x20绑卡页面请求成功!'),console['log']('🔗\x20绑卡页面URL:\x20'+_0x4e113b),_0x4e113b&&_0x4e113b['includes']('checkout.stripe.com')?(console['log']('✅\x20检测到Stripe支付页面'),{'success':!![],'url':_0x4e113b}):(console['warn']('⚠️\x20返回的URL不是预期的Stripe支付页面'),{'success':![],'url':null,'error':'Invalid\x20checkout\x20URL'});}catch(_0x4871e9){const _0xb834dc=await _0x1a28c8['text']();return console['error']('⚠️\x20响应解析失败:\x20'+_0xb834dc['substring'](0x0,0xc8)+'...'),{'success':![],'url':null,'error':'Response\x20parse\x20error'};}else{const _0x29602e=await _0x1a28c8['text']();return console['error']('❌\x20绑卡页面请求失败:\x20'+_0x1a28c8['status']),console['error']('📄\x20错误响应:\x20'+_0x29602e['substring'](0x0,0xc8)+'...'),{'success':![],'url':null,'error':'HTTP\x20'+_0x1a28c8['status']+':\x20'+_0x29602e['substring'](0x0,0x64)};}}catch(_0x47f771){return console['error']('❌\x20绑卡请求异常:\x20'+_0x47f771['message']),{'success':![],'url':null,'error':_0x47f771['message']};}}
